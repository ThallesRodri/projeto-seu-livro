<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeuLivro  :: Lista Clientes</title>

    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="/img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <style>
        p.truncate-3l{
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

    </style>
</head>

    <body style="min-width:372px;">

        <%- include ('../partials/navbarAdm.ejs') %>


        <!-- <main class="flex-fill"> -->
        <div class="container">
           
            <div class="row justify-content-center ">

                <div class="col-8">
                    
                    <div class="text-center">
                        <h1>Clientes Cadastrados</h1>
                        <hr>
                        <form action="/adm/cliente/lista" method="GET">
                            <div class="input-group input-group-sm mb-3">
                                <input type="text" class="form-control" name="cpf" placeholder="Pesquisar Cliente por CPF" value="<%= cpf %>">
                                <button type="submit" class="btn btn-danger">Buscar</button>
                            </div>
                        </form>
                        <table class="table table-striped table-bordered">
                            
                            <thead class="table-danger">
                                <tr>
                                    <th>ID</th>
                                    <th class="text-center">Nome</th>
                                    <th class="text-end">CPF</th>
                                    <th class="text-center">Email</th>
                                    <th class="text-center">Detalhes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% clientes.forEach(cliente => { %>
                                    <% if (!cpf || cliente.cpf === cpf) { %> <!-- Verifica se o CPF foi fornecido ou se corresponde ao CPF do cliente -->
                                        <tr>
                                            <td><%= cliente.id %></td>
                                            <td class="text-end"><%= cliente.nome %></td>
                                            <td class="text-end"><%= cliente.cpf %></td>
                                            <td class="text-end"><%= cliente.email %></td>
                                            <td class="text-center">
                                                <a href="/adm/cliente/detalhes/<%= cliente.id %>" class="btn"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                                </svg></a>
                                            </td>
                                        </tr>
                                    <% } %>
                                <% }) %>
                            </tbody>  
                        </table>      
                    </div>
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <!-- </main> -->

        <%- include ('../partials/footer.ejs') %>

    </body>

    <%- include ('../partials/footerLinks.ejs') %>