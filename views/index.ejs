<%- include ('partials/head.ejs') %>

    <body style="min-width:372px;">

        <%- include ('partials/navbar.ejs') %>

        <header class="container">
           <div id="carouselMain" class="carousel carousel-dark slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselMain" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselMain" data-slide-to="1" class="active"></li>
                    <!-- <li data-target="#carouselMain" data-slide-to="2" class="active"></li> -->
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active text-center" data-interval="3000">
                        <img src="../img/slides/slide1v.jpg" class="img-fluid d-none d-md-block">
                    </div>

                    <div class="carousel-item text-center" data-interval="3000">
                        <img src="../img/slides/slide2.jpg" class="img-fluid d-none d-md-block">
                    </div>

                    <!-- <div class="carousel-item text-center" data-interval="3000">
                        <img src="../img/slides/slide3.jpeg" class="img-fluid d-none d-md-block">
                    </div> -->
                </div>
                <a class="carousel-control-prev" href="#carouselMain" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="visually-hidden"></span>
                </a>
                <a class="carousel-control-next" href="#carouselMain" role="button" data-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="visually-hidden"></span>
                </a>
           </div>
           <hr class="mt-3">
        </header>

        <main class="mb-5 pb-5 mb-md-0">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-md-5">
                        <form action="/" method="GET" class="justify-content-center justify-content-md-start mb-3 mb-md-0">
                            <div class="input-group input-group-sm">
                                <input type="text" class="form-control" name="titulo" placeholder="Digite aqui seu livro" value="<%= titulo %>">
                                <button type="submit" class="btn btn-danger">
                                    Buscar
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="col-12 col-md-7">
                        <div class="d-flex flex-row-reverse justify-content-center justify-content-md-start">
                            <form class="ml-3 d-inline-block">
                                <select class="form-select form-select-sm">
                                    <option>Ordenar por nome</option>
                                    <option>Ordenar por menor preço</option>
                                    <option>Ordenar por maior preço</option>
                                </select>
                            </form>

                            <nav class="d-inline-block">
                                <ul class="pagination pagination-sm my-0">
                                    <li class="page-item">
                                        <button class="page-link">1</button>
                                    </li>
                                    <li class="page-item">
                                        <button class="page-link">2</button>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
                <hr class="mt-3">

                <div class="row g-3">
                    <% livros.forEach(livro => { %>
                        
                            <div class="col-x1-2 col-lg-3 col-md-4 col-sm-6 d-flex align-items-stretch">
                                <div class="card text-center mb-3 bg-light" style="width: 18rem;">
                                    <a href="/produto/<%= livro.id %>">
                                        
                                        <% if (livro.id === 1 ) { %>
                                            <img src="../img/produtos/Frankenstein_1.jpg" class="card-img-top">
                                        <% } %>

                                        <% if (livro.id === 2 ) { %>
                                            <img src="../img/produtos/QDD_1.jpg" class="card-img-top">
                                        <% } %>

                                        <% if (livro.id === 3 ) { %>
                                            <img src="../img/produtos/gatoViajante1.jpg" class="card-img-top">
                                        <% } %>

                                        <% if (livro.id === 4 ) { %>
                                            <img src="../img/produtos/Tomie_1.jpg" class="card-img-top">
                                        <% } %>

                                        <% if (livro.id === 5 ) { %>
                                            <img src="../img/produtos/persepolis1.jpg" class="card-img-top">
                                        <% } %>

                                        <% if (livro.id === 6 ) { %>
                                            <img src="../img/produtos/moby1.jpg" class="card-img-top">
                                        <% } %>

                                        <% if (livro.id === 7 ) { %>
                                            <img src="../img/produtos/metamo1.jpg" class="card-img-top">
                                        <% } %>

                                        <% if (livro.id === 8 ) { %>
                                            <img src="../img/produtos/coraline1.jpg" class="card-img-top">
                                        <% } %>
                                    </a>
                                    <div class="card-header ">
                                        R$ <%= livro.preco %>
                                    </div>
                                    <div class="card-body ">
                                        <h5 class="card-title"><%= livro.titulo %></h5>
                                        <p class="card-text truncate-3l">
                                            <%= livro.sinopse %>
                                        </p>
                                    </div>
                                    <div class="card-footer ">
                                        <form class="d-block">
                                            <button class="btn btn-danger">
                                                <a href="/produto/<%= livro.id %>" style="color: rgb(249, 248, 248)">Comprar</a>
                                            </button>
                                        </form>
                                        <small class="text-success"><%= livro.quantidade %> unidades em estoque</small>
                                    </div>
                                </div>
                            </div>  
                    <% }) %>
                </div>
                <hr class="mt-3">

                <div class="row pb-4">
                    <div class="col-12">
                        <div class="d-flex flex-row-reverse justify-content-center justify-content-md-start">
                            <form class="ml-3 d-inline-block">
                                <select class="form-select form-select-sm">
                                    <option>Ordenar por nome</option>
                                    <option>Ordenar por menor preço</option>
                                    <option>Ordenar por maior preço</option>
                                </select>
                            </form>

                            <nav class="d-inline-block">
                                <ul class="pagination pagination-sm my-0">
                                    <li class="page-item">
                                        <button class="page-link">1</button>
                                    </li>
                                    <li class="page-item">
                                        <button class="page-link">2</button>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <%- include ('partials/footer.ejs') %>

        <!-- <script>
            function buscarLivrosPorTitulo(titulo) {
                // Converter o título para minúsculas para fazer a busca case-insensitive
                const tituloLowerCase = titulo.toLowerCase();
                
                // Filtrar os livros que correspondem ao título pesquisado
                const livrosEncontrados = livros.filter(livro =>
                    livro.titulo.toLowerCase().includes(tituloLowerCase)
                );
                
                return livrosEncontrados;
            }
            
            function realizarBusca() {
                const campoBusca = document.getElementById("campoBusca");
                const termoBusca = campoBusca.value.trim();
                
                if (termoBusca === "") {
                    alert("Por favor, digite um título para buscar.");
                    return;
                }
                
                const livrosEncontrados = buscarLivrosPorTitulo(termoBusca);
                
                // Exibir os resultados da busca na página
                const resultadosDiv = document.getElementById("resultadosBusca");
                resultadosDiv.innerHTML = ""; // Limpar resultados anteriores
                
                if (livrosEncontrados.length === 0) {
                    resultadosDiv.innerHTML = "<p>Nenhum livro encontrado com o título fornecido.</p>";
                } else {
                    livrosEncontrados.forEach(livro => {
                        resultadosDiv.innerHTML += `<p>Título: ${livro.titulo}, Autor: ${livro.autor}</p>`;
                    });
                }
            }
        </script> -->

    </body>

    <%- include ('partials/footerLinks.ejs') %>